<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <title>AI 輔助跌倒風險報告 - 民眾版</title>
    <style>
      :root {
        --brand-primary: #1a73e8;
        --brand-light: #f0f8ff;
        --muted: #555;
        /* Grade 顏色 */
        --grade-A: #dc3545;
        --grade-B: #ffc107;
        --grade-C: #0d6efd;
        --grade-D: #198754;

        /* Risk 顏色 */
        --risk-danger: #ff5757;
        --risk-high: #ffa203;
        --risk-medium: #ffd039;
        --risk-low-medium: #8cff00;
        --risk-low: #4ffa00;
        /* 未選取灰色 */
        --level-inactive-bg: #e0e0e0;
        --level-inactive-color: #555;
      }
      html,
      body {
        font-family: "Noto Sans TC", system-ui, -apple-system, "Segoe UI",
          Roboto, "Helvetica Neue", Arial;
        background: #e9eef2;
        padding: 20px;
        color: #222;
      }
      .report-container {
        display: flex;
        flex-direction: column;
        gap: 28px;
        align-items: center;
      }
      .report-page {
        width: 794px;
        min-height: 1123px;
        background: #fff;
        padding: 36px 44px;
        box-shadow: 0 6px 22px rgba(10, 20, 30, 0.12);
        box-sizing: border-box;
        page-break-after: always;
      }
      .report-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 3px solid var(--brand-primary);
        padding-bottom: 12px;
        margin-bottom: 18px;
      }
      .logo {
        width: 56px;
        height: 56px;
        border-radius: 6px;
        background: var(--brand-primary);
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 20px;
      }
      .report-title {
        font-size: 20px;
        font-weight: 700;
      }
      .report-sub {
        font-size: 12px;
        color: var(--muted);
      }
      .section {
        margin-top: 16px;
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
      }
      .key-card {
        background: var(--brand-light);
        padding: 18px;
        border-radius: 10px;
        flex: 1;
      }
      .block-title {
        font-weight: 700;
        margin-bottom: 10px;
        font-size: 16px;
        color: var(--brand-primary);
      }
      .basic-grid {
        display: flex;
        flex-wrap: wrap;
        gap: 10px 20px;
      }
      .basic-grid p {
        flex: 0 0 48%;
        margin: 0;
        font-size: 14px;
      }
      .list-small {
        font-size: 14px;
        color: #333;
        line-height: 1.6;
      }
      .report-footer {
        margin-top: 28px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 12px;
        color: var(--muted);
        border-top: 1px dashed #ccc;
        padding-top: 8px;
      }
      .level-section {
        display: flex;
        gap: 20px;
        margin-top: 20px;
      }
      .level-column {
        flex: 1;
      }
      .level-column .level-title {
        font-weight: 700;
        color: var(--brand-primary);
        margin-bottom: 6px;
        font-size: 14px;
      }
      .level-tags {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }
      .level-tags span {
        padding: 6px 14px;
        border-radius: 20px;
        font-size: 13px;
        background: var(--level-inactive-bg);
        color: var(--level-inactive-color);
        font-weight: 500;
        cursor: pointer;
      }
      /* Grade active 狀態 */
      .level-tags.grade span.A.active {
        background: var(--grade-A);
        color: #fff;
      }
      .level-tags.grade span.B.active {
        background: var(--grade-B);
        color: #fff;
      }
      .level-tags.grade span.C.active {
        background: var(--grade-C);
        color: #fff;
      }
      .level-tags.grade span.D.active {
        background: var(--grade-D);
        color: #fff;
      }

      /* Risk active 狀態 */
      .level-tags.risk span.danger.active {
        background: var(--risk-danger);
        color: #fff;
      }
      .level-tags.risk span.high.active {
        background: var(--risk-high);
        color: #fff;
      }
      .level-tags.risk span.medium.active {
        background: var(--risk-medium);
        color: #fff;
      }
      .level-tags.risk span.low-medium.active {
        background: var(--risk-low-medium);
        color: #fff;
      }
      .level-tags.risk span.low.active {
        background: var(--risk-low);
        color: #fff;
      }
      .ability-list p {
        margin: 6px 0;
        font-size: 14px;
      }
      .ability-label {
        font-weight: 700;
        display: inline-block;
      }
      .ability-value {
        font-weight: 500;
      }
    </style>
  </head>
  <body>
    <div style="max-width: 1200px; margin: 0 auto">
      <div class="report-container">
        <!-- 第1頁 -->
        <div class="report-page">
          <div class="report-header">
            <div style="display: flex; gap: 12px; align-items: center">
              <div class="logo">F</div>
              <div>
                <div class="report-title">AI 輔助跌倒風險報告</div>
                <div class="report-sub">個人化跌倒風險與步態分析報告</div>
              </div>
            </div>
            <div style="text-align: right">
              <div style="font-weight: 700">受測者：王小明</div>
              <div class="report-sub">鑑測日期：2025-11-30</div>
            </div>
          </div>
          <div class="section">
            <div class="key-card">
              <div class="block-title">基本資料</div>
              <div class="basic-grid">
                <p><strong>年齡：</strong>72 歲</p>
                <p><strong>性別：</strong>男</p>
                <p><strong>身高：</strong>168 cm</p>
                <p><strong>體重：</strong>68 kg</p>
              </div>
            </div>
          </div>
          <div class="level-section">
            <div class="level-column">
              <div class="level-title">VIVIFRAIL 等級</div>
              <div class="level-tags grade">
                <span class="A">A級</span>
                <span class="B">B級</span>
                <span class="C active">C級</span>
                <span class="D">D級</span>
              </div>
            </div>
            <div class="level-column">
              <div class="level-title">跌倒風險等級</div>
              <div class="level-tags risk">
                <span class="danger">危險</span>
                <span class="high">高</span>
                <span class="medium active">中</span>
                <span class="low-medium">稍低</span>
                <span class="low">低</span>
              </div>
            </div>
          </div>
          <div class="section">
            <div class="key-card">
              <div class="block-title">本次檢測風險摘要</div>
              <p class="list-small">
                根據本次 AI 輔助步態與功能分析結果， 您目前的整體跌倒風險評估為
                <strong>「中等風險」</strong>。
              </p>
              <p class="list-small">
                主要影響因素來自於步態速度略慢與平衡能力不足，
                在疲勞、夜間或環境不平整時需特別留意。
              </p>
            </div>
          </div>
          <div class="section">
            <div class="key-card">
              <div class="block-title">關鍵功能指標總覽</div>
              <div class="ability-list">
                <p>
                  <span class="ability-label">步態速度：</span>
                  <span class="ability-value">0.92 m/s（略低）</span>
                </p>
                <p>
                  <span class="ability-label">坐站時間：</span>
                  <span class="ability-value">16.5 秒（偏慢）</span>
                </p>
                <p>
                  <span class="ability-label">平衡能力：</span>
                  <span class="ability-value">需改善</span>
                </p>
                <p>
                  <span class="ability-label">整體行動能力：</span>
                  <span class="ability-value">可自理，需留意安全</span>
                </p>
              </div>
            </div>
          </div>
          <div class="section">
            <div class="key-card">
              <div class="block-title">整體跌倒風險位置</div>
              <canvas id="overviewRisk" height="140"></canvas>
              <p class="list-small" style="margin-top: 10px">
                目前風險位於「中等」區間，
                建議持續訓練與定期追蹤，以降低未來跌倒機率。
              </p>
            </div>
          </div>

          <div class="report-footer">
            <div>報告由 AI 防跌系統產生</div>
            <div>第 1 頁 / 共 6 頁</div>
          </div>
        </div>
        <!-- 第2頁 -->
        <div class="report-page">
          <div class="report-header">
            <div style="display: flex; gap: 12px; align-items: center">
              <div class="logo">F</div>
              <div>
                <div class="report-title">步態與功能檢測詳表</div>
                <div class="report-sub">行走、起身與下肢功能檢測結果</div>
              </div>
            </div>
            <div style="text-align: right">
              <div style="font-weight: 700">受測者：王小明</div>
              <div class="report-sub">鑑測日期：2025-11-30</div>
            </div>
          </div>
          <div class="section">
            <div class="key-card">
              <div class="block-title">步態與坐站測試圖表</div>
              <canvas id="gaitChart" height="160"></canvas>
              <p class="list-small" style="margin-top: 10px">
                圖表顯示本次步態速度與坐站時間相較於同年齡平均值的差異，
                有助於了解目前行動能力的位置。
              </p>
            </div>
          </div>
          <div class="section">
            <div class="key-card">
              <div class="block-title">步態與行走能力</div>
              <div class="ability-list">
                <p>
                  <span class="ability-label">步態速度：</span
                  ><span class="ability-value"
                    >0.92 m/s（略低於同年齡平均）</span
                  >
                </p>
                <p>
                  <span class="ability-label">行走穩定度：</span
                  ><span class="ability-value">行走時偶有左右晃動</span>
                </p>
              </div>
            </div>

            <div class="key-card">
              <div class="block-title">起身與下肢功能</div>
              <div class="ability-list">
                <p>
                  <span class="ability-label">坐站測試：</span
                  ><span class="ability-value">16.5 秒（起身速度偏慢）</span>
                </p>
                <p>
                  <span class="ability-label">下肢肌力：</span
                  ><span class="ability-value">中等，長時間活動後易疲勞</span>
                </p>
              </div>
            </div>
          </div>

          <div class="report-footer">
            <div>報告由 AI 防跌系統產生</div>
            <div>第 2 頁 / 共 6 頁</div>
          </div>
        </div>
        <!-- 第3頁 -->
        <div class="report-page">
          <div class="report-header">
            <div style="display: flex; gap: 12px; align-items: center">
              <div class="logo">F</div>
              <div>
                <div class="report-title">多面向趨勢分析</div>
                <div class="report-sub">近期行動能力與功能變化概況</div>
              </div>
            </div>
            <div style="text-align: right">
              <div style="font-weight: 700">受測者：王小明</div>
              <div class="report-sub">鑑測日期：2025-11-30</div>
            </div>
          </div>
          <div class="section">
            <div class="key-card">
              <div class="block-title">近期功能變化趨勢</div>
              <canvas id="trendChart" height="160"></canvas>
              <p class="list-small" style="margin-top: 10px">
                此圖顯示近幾次檢測中步態與平衡能力的變化趨勢，
                可作為是否持續改善或退化的參考。
              </p>
            </div>
          </div>
          <div class="section">
            <div class="key-card">
              <div class="block-title">功能變化趨勢</div>
              <p class="list-small">
                與過去測驗相比，步態速度略有下降，顯示行走穩定度仍有進步空間。
                坐站測試時間維持相近，表示基本下肢肌力尚可。
              </p>
              <p class="list-small">
                平衡能力偶有波動，可能與疲勞、活動量或精神狀態有關。
              </p>
            </div>

            <div class="key-card">
              <div class="block-title">整體趨勢說明</div>
              <p class="list-small">
                整體行動能力呈現「穩定中略有波動」的狀態，
                尚未出現明顯快速退化，但仍建議持續觀察與訓練。
              </p>
            </div>
          </div>

          <div class="report-footer">
            <div>報告由 AI 防跌系統產生</div>
            <div>第 3 頁 / 共 6 頁</div>
          </div>
        </div>
        <!-- 第4頁 -->
        <div class="report-page">
          <div class="report-header">
            <div style="display: flex; gap: 12px; align-items: center">
              <div class="logo">F</div>
              <div>
                <div class="report-title">功能分類與建議方案</div>
                <div class="report-sub">依功能表現提供日常建議</div>
              </div>
            </div>
            <div style="text-align: right">
              <div style="font-weight: 700">受測者：王小明</div>
              <div class="report-sub">鑑測日期：2025-11-30</div>
            </div>
          </div>
          <div class="section">
            <div class="key-card">
              <div class="block-title">功能能力分類概覽</div>
              <canvas id="functionRadar" height="220"></canvas>
              <p class="list-small" style="margin-top: 10px">
                雷達圖呈現不同功能面向的相對表現，
                可快速了解目前較弱與較穩定的能力項目。
              </p>
            </div>
          </div>
          <div class="section">
            <div class="key-card">
              <div class="block-title">下肢肌力建議</div>
              <p class="list-small">
                下肢肌力屬中等水準，能應付日常活動，但在反覆起身或久站後穩定度可能下降。
              </p>
              <ul class="list-small">
                <li>每週 2–3 次簡單下肢訓練</li>
                <li>起身動作放慢，避免突然站起</li>
              </ul>
            </div>

            <div class="key-card">
              <div class="block-title">平衡能力建議</div>
              <p class="list-small">
                平衡能力仍有改善空間，特別是在轉彎或地面不平時。
              </p>
              <ul class="list-small">
                <li>增加平衡與核心穩定活動</li>
                <li>行走時留意環境安全</li>
              </ul>
            </div>
          </div>

          <div class="report-footer">
            <div>報告由 AI 防跌系統產生</div>
            <div>第 4 頁 / 共 6 頁</div>
          </div>
        </div>
        <!-- 第5頁 -->
        <div class="report-page">
          <div class="report-header">
            <div style="display: flex; gap: 12px; align-items: center">
              <div class="logo">F</div>
              <div>
                <div class="report-title">功能能力與跌倒風險分析</div>
                <div class="report-sub">功能表現與風險關聯說明</div>
              </div>
            </div>
            <div style="text-align: right">
              <div style="font-weight: 700">受測者：王小明</div>
              <div class="report-sub">鑑測日期：2025-11-30</div>
            </div>
          </div>
          <div class="section">
            <div class="key-card">
              <div class="block-title">跌倒風險構成分析</div>
              <canvas id="riskPie" height="180"></canvas>
              <p class="list-small" style="margin-top: 10px">
                此分析顯示影響跌倒風險的主要因素來源，
                有助於理解為何目前評估為中等風險。
              </p>
            </div>
          </div>
          <div class="section">
            <div class="key-card">
              <div class="block-title">功能能力整體評估</div>
              <div class="ability-list">
                <p>
                  <span class="ability-label">步態：</span
                  ><span class="ability-value">速度略慢，穩定度需留意</span>
                </p>
                <p>
                  <span class="ability-label">下肢肌力：</span
                  ><span class="ability-value">中等，可支應日常活動</span>
                </p>
                <p>
                  <span class="ability-label">平衡能力：</span
                  ><span class="ability-value">較弱，轉向時需注意</span>
                </p>
              </div>
            </div>

            <div class="key-card">
              <div class="block-title">跌倒風險形成說明</div>
              <p class="list-small">
                當步態速度下降與平衡能力不足同時出現時，
                在疲勞或環境干擾下，跌倒風險會相對提高，
                因此整體風險評估為「中等」。
              </p>
            </div>
          </div>

          <div class="report-footer">
            <div>報告由 AI 防跌系統產生</div>
            <div>第 5 頁 / 共 6 頁</div>
          </div>
        </div>
        <!-- 第6頁 -->
        <div class="report-page" id="page-6">
          <!-- Header -->
          <div class="report-header">
            <div style="display: flex; gap: 12px; align-items: center">
              <div class="logo">F</div>
              <div>
                <div class="report-title">人體骨架分析</div>
              </div>
            </div>
            <div style="text-align: right">
              <div style="font-weight: 700">受測者：王小明</div>
              <div class="report-sub">鑑測日期：2025-11-30</div>
            </div>
          </div>
          <div class="key-card">
            <!-- 骨架圖與分析 -->
            <div
              class="section"
              style="
                display: flex;
                gap: 24px;
                flex-wrap: wrap;
                align-items: flex-start;
              "
            >
              <!-- 左側骨架示意圖 -->
              <div style="flex: 0 0 300px; min-width: 200px">
                <div
                  style="
                    min-height: 300px;
                    background-color: #f0f0f0;
                    border: 1px solid #ccc;
                    border-radius: 8px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 14px;
                    color: #888;
                    padding: 16px;
                    text-align: center;
                  "
                >
                  （此處放置實際骨架圖）
                </div>
              </div>

              <!-- 右側文字說明 -->
              <div style="flex: 1; min-width: 320px">
                <p class="list-small">
                  本圖為人體骨架圖，將本次防跌檢測中與行走、起身與平衡相關的結果，
                </p>

                <div class="block-title" style="margin-top: 12px">建議措施</div>
                <ul class="list-small">
                  <li>持續肌力與核心穩定訓練</li>
                  <li>步態矯正訓練（步幅、步頻、膝伸展）</li>
                  <li>居家環境安全改善，降低跌倒風險</li>
                  <li>
                    短期改善目標：
                    <ul>
                      <li>步態速度 ≥1.0 m/s（目前 0.92 m/s）</li>
                      <li>平衡分數 ≥75（目前 68）</li>
                      <li>坐站時間 ≤12 秒（目前 16.5 秒）</li>
                    </ul>
                  </li>
                  <li>
                    中長期維持目標：穩定步態、提升下肢肌力與平衡能力，降低跌倒風險
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="block-title" style="margin-top: 16px">
            近期進步/變化趨勢
          </div>
          <ul
            class="list-small"
            style="
              background-color: #f0f8ff;
              padding: 12px;
              border: 1px solid #ccc;
              border-radius: 6px;
              list-style: none;
            "
          >
            <li style="margin-bottom: 6px">
              <strong>步態速度：</strong>上次測量 0.88 m/s → 本次 0.92 m/s，改善
              4.5%
            </li>
            <li style="margin-bottom: 6px">
              <strong>平衡分數：</strong>上次 65 → 本次 68，提升 3 分
            </li>
            <li style="margin-bottom: 6px">
              <strong>坐站時間：</strong>上次 17 秒 → 本次 16.5 秒，略有改善
            </li>
            <li style="margin-bottom: 6px">
              <strong>下肢肌力：</strong>透過訓練，膝關節伸展角度改善約 2%
            </li>
            <li>
              <strong>整體跌倒風險：</strong
              >仍為中等風險，但數據顯示有穩定改善趨勢
            </li>
          </ul>

          <!-- Footer -->
          <div class="report-footer">
            <div>報告由 AI 防跌系統產生</div>
            <div>第 6 頁 / 共 7 頁</div>
          </div>
        </div>

        <!-- 第7頁 -->
        <div class="report-page">
          <div class="report-header">
            <div style="display: flex; gap: 12px; align-items: center">
              <div class="logo">F</div>
              <div>
                <div class="report-title">總結與後續追蹤建議</div>
                <div class="report-sub">整體評估與未來建議</div>
              </div>
            </div>
            <div style="text-align: right">
              <div style="font-weight: 700">受測者：王小明</div>
              <div class="report-sub">鑑測日期：2025-11-30</div>
            </div>
          </div>
          <div class="section">
            <div class="key-card">
              <div class="block-title">目前風險等級位置</div>
              <canvas id="finalLevel" height="120"></canvas>
              <p class="list-small" style="margin-top: 10px">
                目前位於中等風險區間，
                透過持續訓練與追蹤，有機會向低風險區域改善。
              </p>
            </div>
          </div>
          <div class="section">
            <div class="key-card">
              <div class="block-title">整體評估總結</div>
              <p class="list-small">
                目前行動能力仍可支應日常生活需求，
                但步態穩定與平衡能力仍有改善空間。
                透過持續訓練，有助於降低未來跌倒風險。
              </p>
            </div>

            <div class="key-card">
              <div class="block-title">後續追蹤建議</div>
              <ul class="list-small">
                <li>建議 4–8 週後再次進行功能檢測</li>
                <li>若近期曾跌倒，建議提早追蹤評估</li>
                <li>持續注意居家環境安全</li>
              </ul>
            </div>
          </div>

          <div class="report-footer">
            <div>報告由 AI 防跌系統產生</div>
            <div>第 7 頁 / 共 7 頁</div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
<script>
  new Chart(document.getElementById("overviewRisk"), {
    type: "bar",
    data: {
      labels: ["低", "稍低", "中", "高", "危險"],
      datasets: [
        {
          data: [0, 0, 1, 0, 0],
          // 對應 CSS :root 的 risk 顏色
          backgroundColor: [
            "#4FFA00", // 低
            "#8CFF00", // 稍低
            "#FFD039", // 中
            "#FFA203", // 高
            "#FF5757", // 危險
          ],
        },
      ],
    },
    options: {
      indexAxis: "y",
      plugins: { legend: { display: false } },
      scales: {
        x: { display: false },
      },
    },
  });

  new Chart(document.getElementById("gaitChart"), {
    type: "bar",
    data: {
      labels: ["步態速度 (m/s)", "坐站時間 (秒)"],
      datasets: [
        {
          label: "本次測試",
          data: [0.92, 16.5],
        },
        {
          label: "同年齡平均",
          data: [1.1, 14],
        },
      ],
    },
    options: {
      responsive: true,
      plugins: { legend: { position: "bottom" } },
    },
  });
  new Chart(document.getElementById("trendChart"), {
    type: "line",
    data: {
      labels: ["三個月前", "上次檢測", "本次檢測"],
      datasets: [
        {
          label: "步態速度",
          data: [1.0, 0.96, 0.92],
          tension: 0.3,
        },
        {
          label: "平衡表現",
          data: [3, 3, 2],
          tension: 0.3,
        },
      ],
    },
    options: {
      plugins: { legend: { position: "bottom" } },
    },
  });
  new Chart(document.getElementById("functionRadar"), {
    type: "radar",
    data: {
      labels: ["步態", "平衡", "下肢肌力", "核心穩定", "反應能力"],
      datasets: [
        {
          label: "功能表現",
          data: [2.5, 2, 3, 3.5, 2.5],
        },
      ],
    },
    options: {
      scales: {
        r: {
          min: 0,
          max: 5,
          ticks: { stepSize: 1 },
        },
      },
      plugins: { legend: { display: false } },
    },
  });
  new Chart(document.getElementById("riskPie"), {
    type: "pie",
    data: {
      labels: ["平衡能力", "步態速度", "下肢肌力", "其他因素"],
      datasets: [
        {
          data: [35, 30, 25, 10],
        },
      ],
    },
    options: {
      plugins: { legend: { position: "bottom" } },
    },
  });
  new Chart(document.getElementById("finalLevel"), {
    type: "bar",
    data: {
      labels: ["低", "稍低", "中", "高", "危險"],
      datasets: [
        {
          data: [0, 0, 1, 0, 0],
          // 對應 CSS :root 的 risk 顏色
          backgroundColor: [
            "#4FFA00", // 低
            "#8CFF00", // 稍低
            "#FFD039", // 中
            "#FFA203", // 高
            "#FF5757", // 危險
          ],
        },
      ],
    },
    options: {
      indexAxis: "y",
      plugins: { legend: { display: false } },
      scales: {
        x: { display: false },
      },
    },
  });
</script>
